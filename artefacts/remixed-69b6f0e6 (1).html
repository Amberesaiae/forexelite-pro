<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ForexElite Pro ‚Äî Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600;700&family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
<style>
:root {
  --gold:#C9A84C; --gold-l:#E8C97A; --gold-d:#7A6130; --gold-bg:rgba(201,168,76,.08);
  --bg0:#02050B; --bg1:#060C18; --bg2:#0A1020; --bg3:#0F1628; --border:#141E30; --border2:#1C2A40;
  --txt:#EEF2FF; --txt2:#8899BB; --txt3:#445577; --txt4:#2A3A55;
  --green:#00E5A0; --green-d:rgba(0,229,160,.1); --red:#FF4560; --red-d:rgba(255,69,96,.1);
  --blue:#3D85FF; --blue-d:rgba(61,133,255,.1); --purple:#A78BFA;
  --sidebar:220px; --header:52px;
}
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
html{font-size:14px}
body{font-family:'DM Sans',sans-serif;background:var(--bg0);color:var(--txt);overflow:hidden;height:100svh;display:flex}
::-webkit-scrollbar{width:3px;height:3px}::-webkit-scrollbar-track{background:transparent}::-webkit-scrollbar-thumb{background:var(--gold-d);border-radius:2px}
input,select,button{font-family:inherit}
a{text-decoration:none;color:inherit}

/* ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê */
.sidebar{
  width:var(--sidebar);flex-shrink:0;height:100svh;
  background:var(--bg1);border-right:1px solid var(--border);
  display:flex;flex-direction:column;overflow:hidden;
  transition:width .3s ease,transform .3s ease;z-index:100;
}
.sidebar.collapsed{width:56px}
.sb-logo{
  height:var(--header);display:flex;align-items:center;gap:10px;
  padding:0 16px;border-bottom:1px solid var(--border);flex-shrink:0;
  cursor:pointer;overflow:hidden;white-space:nowrap;
}
.sb-logo-icon{width:28px;height:28px;background:var(--gold);border-radius:6px;display:flex;align-items:center;justify-content:center;flex-shrink:0;font-family:'Bebas Neue',sans-serif;font-size:16px;color:var(--bg0);letter-spacing:0}
.sb-logo-text{font-family:'Bebas Neue',sans-serif;font-size:17px;letter-spacing:2px;color:var(--gold);white-space:nowrap;opacity:1;transition:opacity .2s}
.sb-logo-text span{color:var(--txt)}
.sidebar.collapsed .sb-logo-text{opacity:0;pointer-events:none}

.sb-section-label{padding:16px 16px 6px;font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--txt3);font-family:'JetBrains Mono',monospace;overflow:hidden;white-space:nowrap;transition:opacity .2s}
.sidebar.collapsed .sb-section-label{opacity:0}

.sb-nav{flex:1;overflow-y:auto;overflow-x:hidden;padding:6px 8px;display:flex;flex-direction:column;gap:2px}
.sb-item{
  display:flex;align-items:center;gap:10px;padding:9px 10px;border-radius:6px;
  cursor:pointer;transition:all .15s;white-space:nowrap;overflow:hidden;
  color:var(--txt3);font-size:13px;font-weight:500;position:relative;
}
.sb-item:hover{background:var(--bg3);color:var(--txt2)}
.sb-item.active{background:var(--gold-bg);color:var(--gold)}
.sb-item.active::before{content:'';position:absolute;left:0;top:20%;bottom:20%;width:2px;background:var(--gold);border-radius:0 2px 2px 0}
.sb-icon{width:18px;height:18px;flex-shrink:0;display:flex;align-items:center;justify-content:center;font-size:15px}
.sb-label{transition:opacity .2s;overflow:hidden}
.sidebar.collapsed .sb-label{opacity:0;pointer-events:none}
.sb-badge{margin-left:auto;background:var(--red);color:#fff;font-size:9px;font-weight:700;padding:1px 6px;border-radius:10px;flex-shrink:0;transition:opacity .2s}
.sidebar.collapsed .sb-badge{opacity:0}
.sb-item.active .sb-badge{background:var(--gold);color:var(--bg0)}

.sb-bottom{padding:10px 8px;border-top:1px solid var(--border);flex-shrink:0;display:flex;flex-direction:column;gap:2px}
.sb-collapse-btn{display:flex;align-items:center;gap:10px;padding:9px 10px;border-radius:6px;cursor:pointer;transition:all .15s;color:var(--txt3);font-size:13px;font-weight:500;white-space:nowrap;overflow:hidden}
.sb-collapse-btn:hover{background:var(--bg3);color:var(--txt2)}

/* ‚ïê‚ïê‚ïê MAIN AREA ‚ïê‚ïê‚ïê */
.main{flex:1;display:flex;flex-direction:column;min-width:0;overflow:hidden}

/* ‚ïê‚ïê‚ïê HEADER ‚ïê‚ïê‚ïê */
.header{
  height:var(--header);flex-shrink:0;background:var(--bg1);border-bottom:1px solid var(--border);
  display:flex;align-items:center;gap:12px;padding:0 20px;
}
.header-title{font-family:'Bebas Neue',sans-serif;font-size:18px;letter-spacing:1px;color:var(--txt);flex-shrink:0}
.header-sub{font-size:11px;color:var(--txt3);font-family:'JetBrains Mono',monospace;flex-shrink:0;display:none}
.header-sep{width:1px;height:20px;background:var(--border);flex-shrink:0}
.ticker-strip{flex:1;overflow:hidden;min-width:0;cursor:default}
.ticker-scroll{display:flex;gap:28px;animation:tickScroll 25s linear infinite;white-space:nowrap}
@keyframes tickScroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}
.t-item{display:flex;align-items:center;gap:6px;font-family:'JetBrains Mono',monospace;font-size:10px}
.t-pair{color:var(--txt);font-weight:600}.t-price{color:var(--txt2)}
.t-up{color:var(--green)}.t-dn{color:var(--red)}
.header-actions{display:flex;align-items:center;gap:8px;flex-shrink:0}
.hbtn{background:var(--bg3);border:1px solid var(--border);color:var(--txt2);width:32px;height:32px;border-radius:6px;display:flex;align-items:center;justify-content:center;cursor:pointer;font-size:14px;transition:all .15s;position:relative}
.hbtn:hover{border-color:var(--gold-d);color:var(--gold)}
.hbtn .notif-dot{position:absolute;top:6px;right:6px;width:5px;height:5px;background:var(--red);border-radius:50%}
.avatar{width:30px;height:30px;border-radius:50%;background:linear-gradient(135deg,var(--gold-d),var(--gold));display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:var(--bg0);cursor:pointer;flex-shrink:0;font-family:'Bebas Neue',sans-serif}
.mobile-menu-btn{display:none;background:none;border:none;color:var(--txt2);font-size:18px;cursor:pointer;padding:4px;flex-shrink:0}

/* ‚ïê‚ïê‚ïê CONTENT ‚ïê‚ïê‚ïê */
.content{flex:1;overflow-y:auto;overflow-x:hidden;background:var(--bg0)}
.page{display:none;padding:20px;max-width:1400px;min-height:calc(100svh - var(--header))}
.page.active{display:block}

/* ‚ïê‚ïê‚ïê GRID LAYOUTS ‚ïê‚ïê‚ïê */
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.grid-3{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
.grid-4{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
.grid-auto{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:16px}

/* ‚ïê‚ïê‚ïê CARDS ‚ïê‚ïê‚ïê */
.card{background:var(--bg2);border:1px solid var(--border);border-radius:10px;overflow:hidden}
.card-header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--border)}
.card-title{font-size:11px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--txt2);font-family:'JetBrains Mono',monospace}
.card-action{font-size:10px;color:var(--gold);cursor:pointer;letter-spacing:1px;text-transform:uppercase;font-family:'JetBrains Mono',monospace}
.card-body{padding:16px}

/* ‚ïê‚ïê‚ïê STAT CHIPS ‚ïê‚ïê‚ïê */
.stat-chips{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;margin-bottom:20px}
.stat-chip{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:16px;position:relative;overflow:hidden;transition:border-color .2s}
.stat-chip:hover{border-color:var(--border2)}
.stat-chip::after{content:'';position:absolute;bottom:0;left:0;right:0;height:2px}
.stat-chip.g::after{background:var(--green)}.stat-chip.r::after{background:var(--red)}.stat-chip.gold::after{background:var(--gold)}.stat-chip.b::after{background:var(--blue)}
.sc-label{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--txt3);font-family:'JetBrains Mono',monospace;margin-bottom:8px}
.sc-value{font-family:'Bebas Neue',sans-serif;font-size:30px;letter-spacing:1px;line-height:1;margin-bottom:4px}
.sc-value.g{color:var(--green)}.sc-value.r{color:var(--red)}.sc-value.gold{color:var(--gold)}.sc-value.b{color:var(--blue)}
.sc-change{font-size:10px;font-family:'JetBrains Mono',monospace}
.sc-icon{position:absolute;top:12px;right:14px;font-size:20px;opacity:.15}

/* ‚ïê‚ïê‚ïê OVERVIEW LAYOUT ‚ïê‚ïê‚ïê */
.overview-grid{display:grid;grid-template-columns:1fr 320px;gap:16px}
.overview-left{display:flex;flex-direction:column;gap:16px}
.overview-right{display:flex;flex-direction:column;gap:16px}

/* ‚ïê‚ïê‚ïê MINI CHART (SVG sparkline) ‚ïê‚ïê‚ïê */
.spark{width:100%;height:60px}

/* ‚ïê‚ïê‚ïê SIGNAL LIST ‚ïê‚ïê‚ïê */
.signal-list{display:flex;flex-direction:column;gap:8px}
.sig-row{display:flex;align-items:center;gap:10px;padding:10px 12px;background:var(--bg3);border-radius:8px;border:1px solid var(--border);transition:border-color .15s;cursor:default}
.sig-row:hover{border-color:var(--border2)}
.sig-dir{width:32px;height:32px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:900;flex-shrink:0}
.sig-dir.buy{background:var(--green-d);color:var(--green)}.sig-dir.sell{background:var(--red-d);color:var(--red)}
.sig-main{flex:1;min-width:0}
.sig-pair{font-weight:700;font-size:13px}.sig-strat{font-size:10px;color:var(--txt3);font-family:'JetBrains Mono',monospace}
.sig-rr{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--gold);flex-shrink:0}
.sig-time{font-size:9px;color:var(--txt3);font-family:'JetBrains Mono',monospace;flex-shrink:0}
.sig-badge{padding:2px 8px;border-radius:3px;font-size:9px;font-weight:700;letter-spacing:1px;flex-shrink:0}
.sig-badge.buy{background:var(--green-d);color:var(--green)}.sig-badge.sell{background:var(--red-d);color:var(--red)}

/* ‚ïê‚ïê‚ïê PAIR MINI LIST ‚ïê‚ïê‚ïê */
.pair-mini{display:flex;flex-direction:column;gap:2px}
.pm-row{display:flex;align-items:center;padding:8px 10px;border-radius:6px;gap:10px;transition:background .15s;cursor:default}
.pm-row:hover{background:var(--bg3)}
.pm-name{font-weight:700;font-size:12px;width:68px;flex-shrink:0}
.pm-bar-wrap{flex:1;height:3px;background:var(--border);border-radius:2px;position:relative}
.pm-bar{height:100%;border-radius:2px;background:var(--gold)}
.pm-price{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--txt2);width:70px;text-align:right;flex-shrink:0}
.pm-chg{font-family:'JetBrains Mono',monospace;font-size:10px;width:44px;text-align:right;flex-shrink:0}
.up{color:var(--green)}.dn{color:var(--red)}

/* ‚ïê‚ïê‚ïê SESSION PILLS ‚ïê‚ïê‚ïê */
.session-pills{display:flex;gap:8px;flex-wrap:wrap}
.sess-pill{display:flex;align-items:center;gap:8px;padding:10px 14px;background:var(--bg3);border:1px solid var(--border);border-radius:8px;flex:1;min-width:140px}
.sess-pill.active{border-color:var(--green-d);background:rgba(0,229,160,.04)}
.sess-dot{width:7px;height:7px;border-radius:50%;background:var(--txt4);flex-shrink:0}
.sess-pill.active .sess-dot{background:var(--green);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1;transform:scale(1)}50%{opacity:.5;transform:scale(.8)}}
.sess-name{font-weight:700;font-size:12px}.sess-time{font-family:'JetBrains Mono',monospace;font-size:9px;color:var(--txt3)}
.sess-info{display:flex;flex-direction:column;gap:1px}

/* ‚ïê‚ïê‚ïê ACTIVITY FEED ‚ïê‚ïê‚ïê */
.activity{display:flex;flex-direction:column;gap:0}
.act-item{display:flex;gap:12px;padding:10px 0;border-bottom:1px solid var(--border);position:relative}
.act-item:last-child{border:none}
.act-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;margin-top:4px}
.act-content{flex:1;min-width:0}
.act-msg{font-size:12px;color:var(--txt2);line-height:1.4}
.act-msg strong{color:var(--txt);font-weight:600}
.act-time{font-size:9px;color:var(--txt3);font-family:'JetBrains Mono',monospace;margin-top:2px}

/* ‚ïê‚ïê‚ïê SIGNAL GENERATOR PAGE ‚ïê‚ïê‚ïê */
.sig-gen-layout{display:grid;grid-template-columns:260px 1fr;gap:16px;min-height:500px}
.sig-panel{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:18px;display:flex;flex-direction:column;gap:14px}
.sig-output-panel{background:var(--bg2);border:1px solid var(--border);border-radius:10px;overflow:hidden;display:flex;flex-direction:column}
.sig-output-header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.sig-output-body{flex:1;overflow-y:auto;padding:14px;display:flex;flex-direction:column;gap:10px}

.sig-full-card{background:var(--bg3);border:1px solid var(--border);border-radius:8px;padding:14px;display:grid;grid-template-columns:auto 1fr auto;gap:12px;align-items:center;transition:border-color .15s;animation:fadeIn .3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:translateY(0)}}
.sig-full-card:hover{border-color:var(--border2)}
.sig-full-card.buy{border-left:3px solid var(--green)}.sig-full-card.sell{border-left:3px solid var(--red)}
.sfc-icon{width:40px;height:40px;border-radius:10px;display:flex;align-items:center;justify-content:center;font-size:16px;flex-shrink:0}
.sfc-icon.buy{background:var(--green-d);color:var(--green)}.sfc-icon.sell{background:var(--red-d);color:var(--red)}
.sfc-info{min-width:0}
.sfc-pair{font-family:'Bebas Neue',sans-serif;font-size:20px;letter-spacing:1px}
.sfc-strat{font-size:10px;color:var(--gold);font-family:'JetBrains Mono',monospace}
.sfc-meta{font-size:10px;color:var(--txt3);font-family:'JetBrains Mono',monospace;margin-top:2px}
.sfc-levels{text-align:right;display:flex;flex-direction:column;gap:4px}
.lvl-row{display:flex;align-items:center;gap:6px;justify-content:flex-end;font-family:'JetBrains Mono',monospace;font-size:11px}
.lvl-tag{font-size:8px;letter-spacing:1px;text-transform:uppercase;padding:2px 5px;border-radius:2px}
.lvl-tag.e{background:var(--blue-d);color:var(--blue)}.lvl-tag.s{background:var(--red-d);color:var(--red)}.lvl-tag.t{background:var(--green-d);color:var(--green)}
.sfc-str{display:flex;gap:2px;justify-content:flex-end;margin-top:2px}
.str-dot{width:5px;height:5px;border-radius:50%;background:var(--border)}.str-dot.on{background:var(--gold)}

/* ‚ïê‚ïê‚ïê FORM ELEMENTS ‚ïê‚ïê‚ïê */
.f-label{display:block;font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--txt3);font-family:'JetBrains Mono',monospace;margin-bottom:5px}
.f-select,.f-input{width:100%;background:var(--bg3);border:1px solid var(--border);color:var(--txt);padding:9px 11px;font-family:'JetBrains Mono',monospace;font-size:12px;border-radius:6px;transition:border-color .2s;appearance:none;cursor:pointer}
.f-select:focus,.f-input:focus{border-color:var(--gold-d);outline:none}
.f-select:hover{border-color:var(--border2)}
.pill-wrap{display:flex;flex-wrap:wrap;gap:4px}
.pill{padding:4px 10px;font-size:10px;font-weight:500;border-radius:4px;border:1px solid var(--border);color:var(--txt3);cursor:pointer;transition:all .15s;background:transparent}
.pill.on{border-color:var(--gold);color:var(--gold);background:var(--gold-bg)}
.pill:hover{border-color:var(--border2);color:var(--txt2)}
.f-group{display:flex;flex-direction:column;gap:5px}
.pri-btn{background:var(--gold);color:var(--bg0);border:none;padding:11px;font-family:'DM Sans',sans-serif;font-weight:700;font-size:11px;letter-spacing:2px;text-transform:uppercase;border-radius:6px;cursor:pointer;transition:all .2s;width:100%}
.pri-btn:hover{background:var(--gold-l)}
.sec-btn{background:var(--bg3);color:var(--txt2);border:1px solid var(--border);padding:9px 16px;font-family:'DM Sans',sans-serif;font-weight:500;font-size:11px;letter-spacing:1.5px;text-transform:uppercase;border-radius:6px;cursor:pointer;transition:all .2s}
.sec-btn:hover{border-color:var(--gold-d);color:var(--gold)}
.grn-btn{background:var(--green);color:var(--bg0);border:none;padding:11px 20px;font-family:'DM Sans',sans-serif;font-weight:700;font-size:11px;letter-spacing:2px;text-transform:uppercase;border-radius:6px;cursor:pointer;transition:all .2s}
.grn-btn:hover{opacity:.85}

/* ‚ïê‚ïê‚ïê RISK PAGE ‚ïê‚ïê‚ïê */
.calc-card{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:20px}
.calc-card h3{font-family:'Bebas Neue',sans-serif;font-size:17px;letter-spacing:1px;color:var(--gold);margin-bottom:16px;display:flex;align-items:center;gap:8px}
.calc-result-box{background:var(--bg0);border:1px solid var(--gold-d);border-radius:8px;padding:14px;margin-top:12px}
.crb-label{font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--gold-d);font-family:'JetBrains Mono',monospace;margin-bottom:3px}
.crb-value{font-family:'Bebas Neue',sans-serif;font-size:26px;letter-spacing:1px;color:var(--gold)}
.dd-table{display:flex;flex-direction:column;gap:0}
.dd-row{display:flex;justify-content:space-between;align-items:center;padding:9px 0;border-bottom:1px solid var(--border);font-family:'JetBrains Mono',monospace;font-size:11px}
.dd-row:last-child{border:none}
.dd-key{color:var(--txt3)}.dd-val{font-weight:600}

/* ‚ïê‚ïê‚ïê LIBRARY PAGE ‚ïê‚ïê‚ïê */
.lib-tabs-wrap{display:flex;gap:0;border-bottom:1px solid var(--border);margin-bottom:20px;overflow-x:auto;scrollbar-width:none}
.lib-tabs-wrap::-webkit-scrollbar{display:none}
.lib-tab-btn{padding:10px 18px;font-size:10px;font-weight:600;letter-spacing:1.5px;text-transform:uppercase;color:var(--txt3);cursor:pointer;border-bottom:2px solid transparent;margin-bottom:-1px;transition:all .2s;white-space:nowrap;background:none;border-top:none;border-left:none;border-right:none;font-family:'DM Sans',sans-serif}
.lib-tab-btn.on{color:var(--gold);border-bottom-color:var(--gold)}
.lib-tab-btn:hover{color:var(--txt2)}
.lib-pane{display:none}.lib-pane.on{display:block}
.strat-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(290px,1fr));gap:14px}
.strat-c{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:18px;cursor:pointer;transition:all .2s;position:relative;overflow:hidden}
.strat-c::before{content:'';position:absolute;left:0;top:0;bottom:0;width:3px;background:var(--gold);transform:scaleY(0);transition:transform .2s;transform-origin:bottom}
.strat-c:hover{border-color:var(--border2);transform:translateY(-2px);box-shadow:0 8px 28px rgba(0,0,0,.4)}
.strat-c:hover::before{transform:scaleY(1)}
.strat-badge{display:inline-block;padding:2px 8px;font-size:8px;font-weight:700;letter-spacing:2px;text-transform:uppercase;border-radius:3px;margin-bottom:10px;font-family:'JetBrains Mono',monospace}
.b-gold{background:var(--gold-bg);color:var(--gold)}.b-blue{background:var(--blue-d);color:var(--blue)}.b-green{background:var(--green-d);color:var(--green)}.b-red{background:var(--red-d);color:var(--red)}.b-purple{background:rgba(167,139,250,.1);color:var(--purple)}.b-pink{background:rgba(244,114,182,.1);color:#F472B6}
.strat-title{font-family:'Bebas Neue',sans-serif;font-size:17px;letter-spacing:1px;margin-bottom:7px}
.strat-desc{font-size:11px;color:var(--txt2);line-height:1.6;margin-bottom:12px}
.strat-tags{display:flex;flex-wrap:wrap;gap:4px}
.strat-tag{padding:2px 7px;font-size:9px;color:var(--txt3);border:1px solid var(--border);border-radius:3px;font-family:'JetBrains Mono',monospace}
.strat-expand{display:none;margin-top:12px;padding-top:12px;border-top:1px solid var(--border)}
.strat-expand.on{display:block}
.strat-rules{list-style:none;display:flex;flex-direction:column;gap:5px}
.strat-rules li{font-size:10px;color:var(--txt2);font-family:'JetBrains Mono',monospace;padding-left:14px;position:relative;line-height:1.5}
.strat-rules li::before{content:'‚Üí';position:absolute;left:0;color:var(--gold)}

/* ‚ïê‚ïê‚ïê EA PAGE ‚ïê‚ïê‚ïê */
.ea-wrap{background:var(--bg2);border:1px solid var(--border);border-radius:10px;overflow:hidden}
.ea-titlebar{display:flex;align-items:center;gap:8px;padding:12px 18px;background:var(--bg0);border-bottom:1px solid var(--border)}
.mac-dot{width:10px;height:10px;border-radius:50%}.md-r{background:#FF5F57}.md-y{background:#FEBC2E}.md-g{background:#28C840}
.ea-fname{font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--txt2);margin-left:6px;flex:1}
.ea-toolbar{display:flex;gap:8px;padding:12px 18px;border-bottom:1px solid var(--border);background:var(--bg3);flex-wrap:wrap;align-items:center}
.ea-toolbar select{background:var(--bg2);border:1px solid var(--border);color:var(--txt);padding:7px 11px;font-family:'JetBrains Mono',monospace;font-size:11px;border-radius:5px;cursor:pointer;appearance:none}
.ea-code-area{padding:18px;font-family:'JetBrains Mono',monospace;font-size:11px;line-height:1.75;color:var(--txt2);max-height:440px;overflow:auto;background:var(--bg0);white-space:pre;tab-size:2}
.ck{color:#FF79C6}.ct{color:#8BE9FD}.cs{color:#F1FA8C}.cc{color:#6272A4;font-style:italic}.cn{color:#BD93F9}.cf{color:#50FA7B}.cv{color:var(--gold)}

/* ‚ïê‚ïê‚ïê BROKER PAGE ‚ïê‚ïê‚ïê */
.broker-grid-r{display:grid;grid-template-columns:1fr 360px;gap:16px}
.broker-cards{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px}
.bk-card{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:16px;text-align:center;cursor:pointer;transition:all .2s;position:relative}
.bk-card.on{border-color:rgba(0,229,160,.3);background:rgba(0,229,160,.03)}
.bk-card:hover{border-color:var(--border2);transform:translateY(-2px)}
.bk-name{font-family:'Bebas Neue',sans-serif;font-size:16px;letter-spacing:1px;margin-bottom:5px}
.bk-status{font-size:9px;letter-spacing:1.5px;text-transform:uppercase;font-family:'JetBrains Mono',monospace}
.bk-status.on{color:var(--green)}.bk-status.off{color:var(--txt3)}
.bk-live-dot{position:absolute;top:10px;right:10px;width:7px;height:7px;border-radius:50%;background:var(--green);display:none}
.bk-card.on .bk-live-dot{display:block}
.connect-form{background:var(--bg2);border:1px solid var(--border);border-radius:10px;padding:20px}
.connect-form h3{font-family:'Bebas Neue',sans-serif;font-size:16px;letter-spacing:1px;color:var(--gold);margin-bottom:16px}
.warn-box{background:rgba(255,69,96,.05);border:1px solid rgba(255,69,96,.2);border-radius:7px;padding:12px 14px;font-size:10px;color:#FF9BAD;line-height:1.6;margin-bottom:16px;font-family:'JetBrains Mono',monospace}
.form-2col{display:grid;grid-template-columns:1fr 1fr;gap:10px}

/* ‚ïê‚ïê‚ïê PAIRS PAGE ‚ïê‚ïê‚ïê */
.table-scroll{overflow-x:auto;-webkit-overflow-scrolling:touch}
.data-table{width:100%;border-collapse:collapse;font-family:'JetBrains Mono',monospace;font-size:11px;min-width:600px}
.data-table th{text-align:left;padding:10px 14px;font-size:9px;letter-spacing:2px;text-transform:uppercase;color:var(--txt3);border-bottom:1px solid var(--border);background:var(--bg0);white-space:nowrap}
.data-table td{padding:11px 14px;border-bottom:1px solid rgba(20,30,48,.4);transition:background .1s}
.data-table tr:hover td{background:rgba(201,168,76,.03)}
.vol-bar{height:3px;background:var(--border);border-radius:2px;width:56px}.vol-fill{height:100%;border-radius:2px;background:var(--gold)}
.badge{display:inline-block;padding:2px 7px;border-radius:3px;font-size:8px;font-weight:700;letter-spacing:1px}
.badge.bull{background:var(--green-d);color:var(--green)}.badge.bear{background:var(--red-d);color:var(--red)}.badge.neut{background:var(--gold-bg);color:var(--gold)}

/* ‚ïê‚ïê‚ïê NOTIFICATIONS PANEL ‚ïê‚ïê‚ïê */
.notif-panel{position:fixed;top:calc(var(--header) + 8px);right:16px;width:300px;background:var(--bg2);border:1px solid var(--border);border-radius:10px;box-shadow:0 16px 48px rgba(0,0,0,.6);z-index:500;overflow:hidden;display:none;animation:fadeIn .2s ease}
.notif-panel.open{display:block}
.notif-header{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.notif-header span{font-size:12px;font-weight:600;letter-spacing:1px}
.notif-clear{font-size:10px;color:var(--gold);cursor:pointer;font-family:'JetBrains Mono',monospace}
.notif-item{padding:12px 16px;border-bottom:1px solid var(--border);display:flex;gap:10px;cursor:pointer;transition:background .15s}
.notif-item:hover{background:var(--bg3)}
.notif-dot2{width:8px;height:8px;border-radius:50%;flex-shrink:0;margin-top:3px}
.notif-body{font-size:11px;color:var(--txt2);line-height:1.5}
.notif-body strong{color:var(--txt)}
.notif-t{font-size:9px;color:var(--txt3);font-family:'JetBrains Mono',monospace;margin-top:2px}

/* ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê */
.toast-wrap{position:fixed;bottom:20px;right:20px;z-index:3000;display:flex;flex-direction:column;gap:6px;max-width:calc(100vw - 40px)}
.toast{background:var(--bg3);border:1px solid var(--border);border-left:3px solid var(--green);border-radius:7px;padding:11px 16px;font-size:12px;color:var(--txt);animation:toastIn .3s ease,toastOut .3s 2.7s ease forwards;pointer-events:none}
@keyframes toastIn{from{opacity:0;transform:translateX(16px)}to{opacity:1;transform:translateX(0)}}
@keyframes toastOut{from{opacity:1}to{opacity:0}}

/* ‚ïê‚ïê‚ïê EMPTY STATE ‚ïê‚ïê‚ïê */
.empty-state{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:10px;color:var(--txt3);text-align:center}
.empty-icon{font-size:40px;opacity:.25}
.empty-text{font-family:'JetBrains Mono',monospace;font-size:11px;letter-spacing:1px}
.empty-sub{font-size:12px;color:var(--txt4)}

/* ‚ïê‚ïê‚ïê MOBILE OVERLAY ‚ïê‚ïê‚ïê */
.sb-overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.7);z-index:99}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   RESPONSIVE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
@media(max-width:1100px){
  .overview-grid{grid-template-columns:1fr}
  .overview-right{display:grid;grid-template-columns:1fr 1fr}
  .stat-chips{grid-template-columns:repeat(2,1fr)}
  .broker-grid-r{grid-template-columns:1fr}
}
@media(max-width:900px){
  :root{--sidebar:220px}
  .sidebar{position:fixed;height:100svh;transform:translateX(-100%)}
  .sidebar.mobile-open{transform:translateX(0)}
  .sb-overlay.open{display:block}
  .main{margin-left:0!important}
  .mobile-menu-btn{display:flex!important}
  .header-sub{display:block}
  .sig-gen-layout{grid-template-columns:1fr}
  .grid-2,.grid-3,.grid-4{grid-template-columns:1fr}
}
@media(max-width:640px){
  .stat-chips{grid-template-columns:repeat(2,1fr)}
  .strat-grid{grid-template-columns:1fr}
  .session-pills{flex-direction:column}
  .broker-cards{grid-template-columns:repeat(2,1fr)}
  .notif-panel{width:calc(100vw - 32px);right:16px}
  .page{padding:14px}
  .form-2col{grid-template-columns:1fr}
  .overview-right{grid-template-columns:1fr}
  .header{padding:0 14px;gap:8px}
}
@media(max-width:400px){
  .stat-chips{grid-template-columns:1fr 1fr}
  .sc-value{font-size:24px}
  .broker-cards{grid-template-columns:1fr 1fr}
}
@media(hover:none){
  .f-select,.f-input,.f-select,.ea-toolbar select{font-size:16px;padding:12px}
}
</style>
</head>
<body>

<!-- SIDEBAR OVERLAY (mobile) -->
<div class="sb-overlay" id="sb-overlay" onclick="closeSidebar()"></div>

<!-- SIDEBAR -->
<div class="sidebar" id="sidebar">
  <div class="sb-logo" onclick="toggleSidebar()">
    <div class="sb-logo-icon">FE</div>
    <div class="sb-logo-text">FOREX<span>ELITE</span></div>
  </div>

  <div class="sb-nav">
    <div class="sb-section-label">MAIN</div>
    <div class="sb-item active" onclick="nav('overview',this)" data-page="overview">
      <div class="sb-icon">üìä</div><span class="sb-label">Overview</span>
    </div>
    <div class="sb-item" onclick="nav('signals',this)" data-page="signals">
      <div class="sb-icon">‚ö°</div><span class="sb-label">Signal Generator</span>
      <span class="sb-badge">3</span>
    </div>
    <div class="sb-item" onclick="nav('pairs',this)" data-page="pairs">
      <div class="sb-icon">üí±</div><span class="sb-label">Currency Pairs</span>
    </div>

    <div class="sb-section-label" style="margin-top:6px">TOOLS</div>
    <div class="sb-item" onclick="nav('risk',this)" data-page="risk">
      <div class="sb-icon">üõ°</div><span class="sb-label">Risk Management</span>
    </div>
    <div class="sb-item" onclick="nav('library',this)" data-page="library">
      <div class="sb-icon">üìö</div><span class="sb-label">Strategy Library</span>
    </div>
    <div class="sb-item" onclick="nav('ea',this)" data-page="ea">
      <div class="sb-icon">ü§ñ</div><span class="sb-label">EA Generator</span>
    </div>

    <div class="sb-section-label" style="margin-top:6px">ACCOUNT</div>
    <div class="sb-item" onclick="nav('broker',this)" data-page="broker">
      <div class="sb-icon">üîó</div><span class="sb-label">Broker Connect</span>
    </div>
  </div>

  <div class="sb-bottom">
    <div class="sb-collapse-btn" onclick="toggleSidebar()">
      <div class="sb-icon" id="collapse-icon">‚óÄ</div>
      <span class="sb-label" style="font-size:12px;color:var(--txt3)">Collapse</span>
    </div>
  </div>
</div>

<!-- MAIN -->
<div class="main" id="main">

  <!-- HEADER -->
  <div class="header">
    <button class="mobile-menu-btn" onclick="openSidebar()">‚ò∞</button>
    <div class="header-title" id="page-title">OVERVIEW</div>
    <div class="header-sep" style="display:none" id="hdr-sep"></div>
    <div class="header-sub" id="page-sub">Dashboard</div>
    <div class="header-sep"></div>
    <div class="ticker-strip">
      <div class="ticker-scroll" id="ticker-scroll"></div>
    </div>
    <div class="header-actions">
      <div class="hbtn" onclick="toggleNotif()" title="Notifications">
        üîî<div class="notif-dot"></div>
      </div>
      <div class="hbtn" title="Settings">‚öô</div>
      <div class="avatar">FE</div>
    </div>
  </div>

  <!-- CONTENT -->
  <div class="content">

    <!-- ‚îÄ‚îÄ OVERVIEW PAGE ‚îÄ‚îÄ -->
    <div class="page active" id="page-overview">
      <div class="stat-chips">
        <div class="stat-chip gold"><div class="sc-icon">‚ö°</div><div class="sc-label">Active Signals</div><div class="sc-value gold">7</div><div class="sc-change" style="color:var(--green)">‚ñ≤ 3 new today</div></div>
        <div class="stat-chip g"><div class="sc-icon">üìà</div><div class="sc-label">Win Rate (30d)</div><div class="sc-value g">68%</div><div class="sc-change" style="color:var(--green)">‚ñ≤ +4% vs last month</div></div>
        <div class="stat-chip b"><div class="sc-icon">üí∞</div><div class="sc-label">Avg R:R</div><div class="sc-value b">1:2.4</div><div class="sc-change" style="color:var(--txt3)">Based on last 50 trades</div></div>
        <div class="stat-chip r"><div class="sc-icon">üõ°</div><div class="sc-label">Open Drawdown</div><div class="sc-value r">1.2%</div><div class="sc-change" style="color:var(--green)">Within 3% daily limit</div></div>
      </div>

      <div class="overview-grid">
        <div class="overview-left">
          <!-- Sparkline chart -->
          <div class="card">
            <div class="card-header">
              <span class="card-title">EQUITY CURVE (30D)</span>
              <div style="display:flex;gap:12px;align-items:center">
                <span style="font-size:10px;color:var(--green);font-family:'JetBrains Mono',monospace">+12.4%</span>
                <span class="card-action" onclick="nav('pairs',document.querySelector('[data-page=pairs]'))">VIEW ALL ‚Üí</span>
              </div>
            </div>
            <div class="card-body" style="padding:10px 16px 16px">
              <svg class="spark" viewBox="0 0 800 80" preserveAspectRatio="none" id="equity-spark"></svg>
            </div>
          </div>

          <!-- Recent signals -->
          <div class="card">
            <div class="card-header">
              <span class="card-title">RECENT SIGNALS</span>
              <span class="card-action" onclick="nav('signals',document.querySelector('[data-page=signals]'))">GENERATE NEW ‚Üí</span>
            </div>
            <div class="card-body">
              <div class="signal-list" id="overview-signals"></div>
            </div>
          </div>

          <!-- Sessions -->
          <div class="card">
            <div class="card-header"><span class="card-title">MARKET SESSIONS</span></div>
            <div class="card-body">
              <div class="session-pills" id="sessions-pills"></div>
            </div>
          </div>
        </div>

        <div class="overview-right">
          <!-- Pair watchlist -->
          <div class="card">
            <div class="card-header">
              <span class="card-title">WATCHLIST</span>
              <span class="card-action" onclick="nav('pairs',document.querySelector('[data-page=pairs]'))">FULL TABLE ‚Üí</span>
            </div>
            <div class="card-body" style="padding:8px 8px">
              <div class="pair-mini" id="pair-mini-list"></div>
            </div>
          </div>

          <!-- Activity feed -->
          <div class="card">
            <div class="card-header"><span class="card-title">ACTIVITY</span></div>
            <div class="card-body" style="padding:8px 16px">
              <div class="activity" id="activity-feed"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ SIGNAL GENERATOR PAGE ‚îÄ‚îÄ -->
    <div class="page" id="page-signals">
      <div class="sig-gen-layout">
        <div class="sig-panel">
          <div style="font-family:'Bebas Neue',sans-serif;font-size:17px;letter-spacing:2px;color:var(--gold)">CONFIGURE SIGNAL</div>
          <div class="f-group"><label class="f-label">Currency Pair</label>
            <select class="f-select" id="sig-pair">
              <option>XAUUSD ‚Äî Gold</option><option>EURUSD ‚Äî Euro/Dollar</option>
              <option>GBPUSD ‚Äî Cable</option><option>USDJPY ‚Äî Dollar/Yen</option>
              <option>GBPJPY ‚Äî Beast</option><option>AUDUSD ‚Äî Aussie</option>
              <option>USDCAD ‚Äî Loonie</option><option>EURJPY ‚Äî Euro/Yen</option>
            </select>
          </div>
          <div class="f-group"><label class="f-label">Timeframe</label>
            <select class="f-select" id="sig-tf">
              <option>M1 ‚Äî Scalping</option><option>M5 ‚Äî Micro</option>
              <option>M15 ‚Äî Intraday</option><option>M30 ‚Äî Swing Entry</option>
              <option selected>H1 ‚Äî Primary</option><option>H4 ‚Äî Swing</option>
              <option>D1 ‚Äî Position</option>
            </select>
          </div>
          <div class="f-group"><label class="f-label">Strategy Layer</label>
            <div class="pill-wrap">
              <button class="pill on" onclick="this.classList.toggle('on')">SMC</button>
              <button class="pill on" onclick="this.classList.toggle('on')">S&R</button>
              <button class="pill" onclick="this.classList.toggle('on')">Price Action</button>
              <button class="pill" onclick="this.classList.toggle('on')">OB</button>
              <button class="pill" onclick="this.classList.toggle('on')">FVG</button>
              <button class="pill" onclick="this.classList.toggle('on')">CHoCH</button>
              <button class="pill" onclick="this.classList.toggle('on')">BOS</button>
              <button class="pill" onclick="this.classList.toggle('on')">Liquidity</button>
            </div>
          </div>
          <div class="f-group"><label class="f-label">Risk Per Trade (%)</label>
            <input class="f-input" type="number" value="1" min="0.5" max="5" step="0.5" id="sig-risk">
          </div>
          <div class="f-group"><label class="f-label">Min R:R Ratio</label>
            <select class="f-select" id="sig-rr">
              <option>1:1 ‚Äî Break Even</option><option>1:1.5 ‚Äî Conservative</option>
              <option selected>1:2 ‚Äî Standard</option><option>1:3 ‚Äî Aggressive</option>
              <option>1:5 ‚Äî High Target</option>
            </select>
          </div>
          <button class="pri-btn" style="margin-top:auto" onclick="generateSignals()">‚ö° GENERATE SIGNALS</button>
        </div>
        <div class="sig-output-panel">
          <div class="sig-output-header">
            <span class="card-title">SIGNAL OUTPUT</span>
            <span id="sig-count-label" style="font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--txt3)">AWAITING INPUT</span>
          </div>
          <div class="sig-output-body" id="sig-output">
            <div class="empty-state">
              <div class="empty-icon">üì°</div>
              <div class="empty-text">NO SIGNALS YET</div>
              <div class="empty-sub">Configure parameters and click Generate</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ RISK PAGE ‚îÄ‚îÄ -->
    <div class="page" id="page-risk">
      <div class="grid-2" style="margin-bottom:16px">
        <div class="calc-card">
          <h3>üéØ LOT SIZE CALCULATOR</h3>
          <div class="f-group"><label class="f-label">Account Balance ($)</label><input class="f-input" type="number" id="acc-bal" value="10000"></div>
          <div class="f-group"><label class="f-label">Risk Per Trade (%)</label><input class="f-input" type="number" id="risk-pct" value="1" min="0.1" max="10" step="0.1"></div>
          <div class="f-group"><label class="f-label">Stop Loss (Pips)</label><input class="f-input" type="number" id="sl-pips" value="30"></div>
          <button class="pri-btn" style="margin-top:8px" onclick="calcLot()">CALCULATE</button>
          <div class="calc-result-box"><div class="crb-label">Recommended Lot Size</div><div class="crb-value" id="lot-res">‚Äî</div></div>
        </div>
        <div class="calc-card">
          <h3>üìê RISK : REWARD RATIO</h3>
          <div class="f-group"><label class="f-label">Entry Price</label><input class="f-input" type="number" id="rr-entry" value="1.2500" step="0.0001"></div>
          <div class="f-group"><label class="f-label">Stop Loss Price</label><input class="f-input" type="number" id="rr-sl" value="1.2460" step="0.0001"></div>
          <div class="f-group"><label class="f-label">Take Profit Price</label><input class="f-input" type="number" id="rr-tp" value="1.2580" step="0.0001"></div>
          <div class="f-group"><label class="f-label">Direction</label><select class="f-select" id="rr-dir"><option value="buy">BUY</option><option value="sell">SELL</option></select></div>
          <button class="pri-btn" style="margin-top:auto" onclick="calcRR()">CALCULATE</button>
          <div class="calc-result-box"><div class="crb-label">Risk : Reward Ratio</div><div class="crb-value" id="rr-res">‚Äî : ‚Äî</div></div>
        </div>
        <div class="calc-card">
          <h3>üíµ PIP VALUE CALCULATOR</h3>
          <div class="f-group"><label class="f-label">Lot Size</label><input class="f-input" type="number" id="pip-lot" value="0.1" step="0.01"></div>
          <div class="f-group"><label class="f-label">Number of Pips</label><input class="f-input" type="number" id="pip-n" value="50"></div>
          <div class="f-group"><label class="f-label">Pair Type</label>
            <select class="f-select" id="pip-type">
              <option value="10">Major USD ‚Äî $10/pip per std lot</option>
              <option value="9.2">EUR/USD, GBP/USD</option>
              <option value="0.009">USD/JPY</option>
              <option value="1">XAU/USD Gold</option>
            </select>
          </div>
          <button class="pri-btn" style="margin-top:8px" onclick="calcPip()">CALCULATE</button>
          <div class="calc-result-box"><div class="crb-label">Total Pip Value</div><div class="crb-value" id="pip-res">‚Äî</div></div>
        </div>
        <div class="calc-card">
          <h3>üõ° DRAWDOWN RULES</h3>
          <div class="dd-table">
            <div class="dd-row"><span class="dd-key">Daily Loss Limit</span><span class="dd-val" style="color:var(--red)">Max 3%</span></div>
            <div class="dd-row"><span class="dd-key">Weekly Drawdown</span><span class="dd-val" style="color:var(--red)">Max 6%</span></div>
            <div class="dd-row"><span class="dd-key">Max Risk / Trade</span><span class="dd-val" style="color:var(--gold)">1‚Äì2%</span></div>
            <div class="dd-row"><span class="dd-key">Max Open Trades</span><span class="dd-val" style="color:var(--gold)">3‚Äì5</span></div>
            <div class="dd-row"><span class="dd-key">Minimum R:R</span><span class="dd-val" style="color:var(--green)">1:2</span></div>
            <div class="dd-row"><span class="dd-key">Target Win Rate</span><span class="dd-val" style="color:var(--green)">45%+</span></div>
            <div class="dd-row"><span class="dd-key">Correlation Limit</span><span class="dd-val" style="color:var(--blue)">3 corr. max</span></div>
          </div>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ LIBRARY PAGE ‚îÄ‚îÄ -->
    <div class="page" id="page-library">
      <div class="lib-tabs-wrap" id="lib-tabs"></div>
      <div id="lib-panes"></div>
    </div>

    <!-- ‚îÄ‚îÄ EA PAGE ‚îÄ‚îÄ -->
    <div class="page" id="page-ea">
      <div class="ea-wrap">
        <div class="ea-titlebar">
          <div class="mac-dot md-r"></div><div class="mac-dot md-y"></div><div class="mac-dot md-g"></div>
          <div class="ea-fname" id="ea-fname">ForexElite_SMC_OB.mq5</div>
          <button class="sec-btn" onclick="copyEA()" style="padding:5px 12px;font-size:10px">‚éò COPY</button>
        </div>
        <div class="ea-toolbar">
          <select id="ea-strat" onchange="renderEA()">
            <option value="smc">SMC ‚Äî Order Block + CHoCH</option>
            <option value="sr">Support &amp; Resistance Bounce</option>
            <option value="ma">Moving Average Crossover</option>
            <option value="fvg">Fair Value Gap (FVG)</option>
            <option value="brk">Breakout + Retest</option>
          </select>
          <select id="ea-pair" onchange="renderEA()">
            <option>XAUUSD</option><option>EURUSD</option><option>GBPUSD</option><option>USDJPY</option><option>GBPJPY</option>
          </select>
          <select id="ea-tf" onchange="renderEA()">
            <option>PERIOD_M15</option><option>PERIOD_M30</option><option selected>PERIOD_H1</option><option>PERIOD_H4</option><option>PERIOD_D1</option>
          </select>
          <input id="ea-risk" type="number" value="1" min="0.5" max="5" step="0.5" onchange="renderEA()" style="background:var(--bg2);border:1px solid var(--border);color:var(--txt);padding:7px 10px;font-family:'JetBrains Mono',monospace;font-size:11px;border-radius:5px;width:64px">
          <button class="pri-btn" style="width:auto;padding:7px 16px" onclick="renderEA()">GENERATE</button>
        </div>
        <div class="ea-code-area" id="ea-code"></div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ BROKER PAGE ‚îÄ‚îÄ -->
    <div class="page" id="page-broker">
      <div class="broker-grid-r">
        <div>
          <div class="card" style="margin-bottom:16px">
            <div class="card-header"><span class="card-title">SUPPORTED BROKERS</span></div>
            <div class="card-body"><div class="broker-cards" id="broker-cards"></div></div>
          </div>
          <div class="warn-box">‚ö† Always test EAs on a DEMO account for a minimum of 30 days before live deployment. Past performance does not guarantee future results.</div>
        </div>
        <div class="connect-form">
          <h3>MT5 CREDENTIALS</h3>
          <div class="form-2col">
            <div class="f-group"><label class="f-label">Broker</label><select class="f-select"><option>Exness Global</option><option>XM Global</option><option>IC Markets</option><option>FXTM</option><option>Pepperstone</option><option>FBS</option></select></div>
            <div class="f-group"><label class="f-label">Account Type</label><select class="f-select"><option>Demo</option><option>Live</option></select></div>
          </div>
          <div class="form-2col">
            <div class="f-group"><label class="f-label">Account Number</label><input class="f-input" type="text" placeholder="12345678"></div>
            <div class="f-group"><label class="f-label">Password</label><input class="f-input" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"></div>
          </div>
          <div class="f-group" style="margin-bottom:10px"><label class="f-label">Server Name</label><input class="f-input" type="text" placeholder="Exness-MT5Real3"></div>
          <div class="form-2col" style="margin-bottom:14px">
            <div class="f-group"><label class="f-label">Max Lot Size</label><input class="f-input" type="number" value="0.5" step="0.01"></div>
            <div class="f-group"><label class="f-label">Max Daily Trades</label><input class="f-input" type="number" value="5"></div>
          </div>
          <button class="grn-btn" style="width:100%" onclick="connectBroker()">üîó CONNECT & AUTHENTICATE</button>
        </div>
      </div>
    </div>

    <!-- ‚îÄ‚îÄ PAIRS PAGE ‚îÄ‚îÄ -->
    <div class="page" id="page-pairs">
      <div class="card">
        <div class="card-header">
          <span class="card-title">LIVE MARKET WATCHLIST</span>
          <span style="font-family:'JetBrains Mono',monospace;font-size:10px;color:var(--green)">‚óè LIVE</span>
        </div>
        <div class="table-scroll">
          <table class="data-table">
            <thead><tr><th>Pair</th><th>Bid</th><th>Ask</th><th>Spread</th><th>Volatility</th><th>Session</th><th>Bias</th><th>Signal</th></tr></thead>
            <tbody id="pairs-tbody"></tbody>
          </table>
        </div>
      </div>
    </div>

  </div><!-- /content -->
</div><!-- /main -->

<!-- NOTIFICATIONS PANEL -->
<div class="notif-panel" id="notif-panel">
  <div class="notif-header"><span>NOTIFICATIONS</span><span class="notif-clear" onclick="clearNotifs()">CLEAR ALL</span></div>
  <div id="notif-list"></div>
</div>

<!-- TOAST -->
<div class="toast-wrap" id="toasts"></div>

<script>
// ‚ïê‚ïê‚ïê DATA ‚ïê‚ïê‚ïê
const PAIRS=[
  {p:'XAUUSD',bid:'2318.45',ask:'2318.95',spread:0.5,vol:90,sess:'All',bias:'bull',sig:'BUY'},
  {p:'EURUSD',bid:'1.08412',ask:'1.08418',spread:0.6,vol:75,sess:'London/NY',bias:'bear',sig:'SELL'},
  {p:'GBPUSD',bid:'1.26534',ask:'1.26542',spread:0.8,vol:78,sess:'London',bias:'bull',sig:'BUY'},
  {p:'USDJPY',bid:'154.321',ask:'154.330',spread:0.9,vol:70,sess:'Tokyo/NY',bias:'bull',sig:'BUY'},
  {p:'GBPJPY',bid:'195.241',ask:'195.265',spread:2.4,vol:95,sess:'London',bias:'neut',sig:'WAIT'},
  {p:'AUDUSD',bid:'0.65312',ask:'0.65320',spread:0.8,vol:60,sess:'Sydney',bias:'bear',sig:'SELL'},
  {p:'USDCAD',bid:'1.36812',ask:'1.36820',spread:0.8,vol:55,sess:'NY',bias:'bull',sig:'BUY'},
  {p:'NZDUSD',bid:'0.60124',ask:'0.60133',spread:0.9,vol:50,sess:'Sydney',bias:'bear',sig:'SELL'},
  {p:'USDCHF',bid:'0.90123',ask:'0.90132',spread:0.9,vol:48,sess:'London',bias:'neut',sig:'WAIT'},
  {p:'EURJPY',bid:'167.342',ask:'167.356',spread:1.4,vol:72,sess:'Tokyo/Ldn',bias:'bull',sig:'BUY'},
  {p:'GBPNZD',bid:'2.10234',ask:'2.10260',spread:2.6,vol:80,sess:'London',bias:'bull',sig:'BUY'},
  {p:'EURGBP',bid:'0.85612',ask:'0.85620',spread:0.8,vol:42,sess:'London',bias:'bear',sig:'SELL'},
];
const SESSIONS=[
  {name:'SYDNEY',open:'22:00',close:'07:00',pairs:'AUD ¬∑ NZD ¬∑ JPY',active:true},
  {name:'TOKYO',open:'00:00',close:'09:00',pairs:'JPY ¬∑ AUD ¬∑ NZD',active:true},
  {name:'LONDON',open:'08:00',close:'17:00',pairs:'EUR ¬∑ GBP ¬∑ CHF',active:false},
  {name:'NEW YORK',open:'13:00',close:'22:00',pairs:'USD ¬∑ CAD ¬∑ MXN',active:false},
];
const TICKER=[
  {p:'XAUUSD',v:'2318.45',c:'+0.42%',u:true},{p:'EURUSD',v:'1.08415',c:'-0.18%',u:false},
  {p:'GBPUSD',v:'1.26538',c:'+0.31%',u:true},{p:'USDJPY',v:'154.325',c:'+0.22%',u:true},
  {p:'GBPJPY',v:'195.248',c:'+0.55%',u:true},{p:'AUDUSD',v:'0.65316',c:'-0.12%',u:false},
  {p:'USDCAD',v:'1.36815',c:'+0.08%',u:true},{p:'NZDUSD',v:'0.60128',c:'-0.25%',u:false},
  {p:'EURJPY',v:'167.350',c:'+0.41%',u:true},{p:'USDCHF',v:'0.90128',c:'-0.05%',u:false},
];
const BROKERS=['EXNESS','XM GLOBAL','IC MARKETS','FXTM','PEPPERSTONE','FBS'];
const NOTIFS=[
  {color:'var(--green)',msg:'<strong>XAUUSD BUY</strong> signal generated ‚Äî SMC Order Block at 2311.50',t:'2 min ago'},
  {color:'var(--gold)',msg:'<strong>EURUSD SELL</strong> signal ‚Äî H4 Resistance confluence',t:'18 min ago'},
  {color:'var(--blue)',msg:'<strong>Broker update:</strong> Exness connection ready to configure',t:'1 hr ago'},
  {color:'var(--red)',msg:'<strong>GBPJPY</strong> hit daily volatility limit ‚Äî monitor closely',t:'3 hr ago'},
];
const ACTIVITY=[
  {color:'var(--green)',msg:'Signal generated for <strong>XAUUSD BUY</strong> at 2318.45',t:'2m ago'},
  {color:'var(--gold)',msg:'Strategy <strong>SMC Order Block</strong> updated ‚Äî rules added',t:'15m ago'},
  {color:'var(--blue)',msg:'<strong>GBPUSD</strong> approaching D1 resistance ‚Äî alert triggered',t:'42m ago'},
  {color:'var(--red)',msg:'Stop Loss hit on <strong>USDJPY</strong> sell trade',t:'2h ago'},
  {color:'var(--green)',msg:'<strong>EA Generator</strong> ‚Äî new EURUSD code exported',t:'5h ago'},
];

// ‚îÄ LIBRARY DATA ‚îÄ
const LIB={
  SMC:{badge:'b-gold',strats:[
    {title:'ORDER BLOCK ENTRY',desc:'Identify the last opposing candle before an impulsive move. Enter when price retraces into the zone with confirmation.',tags:['H1','H4','D1'],rules:['Identify BOS (Break of Structure)','Find last bearish candle before bullish impulse','Mark OB zone (high/low of that candle)','Wait for retracement into OB','Enter on rejection candle inside OB','SL below OB, TP at structural high']},
    {title:'FAIR VALUE GAP',desc:'Three-candle imbalance where price leaves a gap that tends to be filled before continuing.',tags:['M15','H1','Day Trading'],rules:['Candle 1 high vs Candle 3 low (bullish FVG)','Mark the gap zone on chart','Wait for price to return to 50% of gap','Enter with momentum confirmation','SL beyond FVG, TP at next structure']},
    {title:'CHANGE OF CHARACTER',desc:'Price breaks the most recent opposing swing, signaling a potential trend shift.',tags:['H1','H4','Reversal'],rules:['In downtrend: identify LH & LL series','CHoCH = break above the last LH','Confirm with volume on break candle','Enter on retest of CHoCH level','TP at prior swing, SL below origin']},
    {title:'LIQUIDITY SWEEP',desc:'Smart Money sweeps stop clusters before reversing. Enter after the sweep closes back inside range.',tags:['H1','H4','Reversal'],rules:['Identify equal highs/lows (liquidity pools)','Wait for spike beyond the level','Sweep candle must close back inside','Look for OB or FVG at swept level','Enter reversal, SL beyond sweep wick']},
  ]},
  'PRICE ACTION':{badge:'b-blue',strats:[
    {title:'PIN BAR REVERSAL',desc:'Long wick rejection candle at key levels. One of the most reliable single-candle patterns.',tags:['All TF','Reversal'],rules:['Body < 1/3 of total candle range','Wick ‚â• 2/3 of total range','Must form at S&R, OB or Fib level','Enter on break of pin bar body','SL beyond the wick tip']},
    {title:'ENGULFING PATTERN',desc:'Second candle fully engulfs the first ‚Äî momentum shift signal, strongest at key levels.',tags:['H1','H4','D1'],rules:['C2 body must fully engulf C1 body','Bullish: C1 bearish, C2 bullish','Must occur at key support/resistance','Larger C2 vs C1 = stronger signal','Enter on C2 close, SL beyond pattern']},
    {title:'INSIDE BAR BREAKOUT',desc:'Consolidation within a mother bar. Breakout direction in trend continuation context.',tags:['H4','D1','Continuation'],rules:['IB high < MB high AND IB low > MB low','More powerful after large directional MB','Enter on break beyond MB high/low','SL inside the IB range','TP: 1:2 minimum or next key level']},
  ]},
  'S&R':{badge:'b-green',strats:[
    {title:'S&R BOUNCE',desc:'Price bouncing off horizontal levels with multiple prior reactions ‚Äî the backbone of technical analysis.',tags:['All TF','High Probability'],rules:['Min 2 prior touches to validate level','Wait for price to reach the level','Confirm with rejection candle','Enter direction of bounce','SL just beyond the level']},
    {title:'BREAKOUT & RETEST',desc:'Level breaks on momentum, then retests as new support/resistance before continuing.',tags:['H1','H4','Continuation'],rules:['Wait for strong breakout candle close','Do NOT enter on the initial break','Wait for price to retest the level','Enter on rejection at retested level','TP = measured move of prior range']},
    {title:'FIBONACCI RETRACEMENT',desc:'Use the 61.8% golden ratio and 78.6% for high-confluence entries during pullbacks.',tags:['H1','H4','Confluence'],rules:['Identify clear swing high & low','Draw Fib from origin to extreme','Focus on 61.8% & 78.6% levels','Combine with S&R or OB confluence','Enter on candle confirmation']},
  ]},
  'PATTERNS':{badge:'b-red',strats:[
    {title:'HEAD & SHOULDERS',desc:'Classic three-peak reversal: left shoulder, head (highest), right shoulder. Neckline break confirms.',tags:['H4','D1','Reversal'],rules:['Identify 3 peaks: LS, Head, RS','RS should be ~same height as LS','Neckline: connects the two troughs','Entry: break below neckline','TP = head height measured from neckline','SL above RS']},
    {title:'DOUBLE TOP / BOTTOM',desc:'Two near-equal peaks or troughs signaling exhaustion of the prevailing trend.',tags:['All TF','All Pairs'],rules:['Two peaks at approx same level','2nd peak fails to exceed 1st','Neckline = valley between peaks','Entry: break below neckline','TP = measured distance top to neckline']},
    {title:'BULL / BEAR FLAG',desc:'Impulsive move (flagpole) followed by tight counter-trend consolidation. Breakout continues.',tags:['M15','H1','H4'],rules:['Strong impulsive move = flagpole','Flag: slight counter-trend slope','Flag < 50% retracement of flagpole','Entry: breakout of flag in pole direction','TP = flagpole length from breakout']},
  ]},
  'MONEY MGMT':{badge:'b-pink',strats:[
    {title:'1% RISK RULE',desc:'Never risk more than 1-2% per trade. The foundational rule that ensures trading longevity.',tags:['All Traders','Essential'],rules:['Calculate 1% of account balance','This is your max $ loss per trade','Formula: Risk$ √∑ (SL pips √ó pip value)','Adjust lot size, never the stop loss','10 losses at 1% = still 90% capital']},
    {title:'PYRAMID TRADING',desc:'Add to winning positions at key levels, reducing subsequent size to protect overall risk.',tags:['H1','H4','Advanced'],rules:['Enter initial size at primary signal','Move SL to BE after 1R profit','Add smaller position at BE retracement','Smallest add at next structure','Trail SL to lock in profits']},
    {title:'TRAILING STOP METHOD',desc:'Lock in profits by trailing stop below swing lows on longs, above swing highs on shorts.',tags:['All TF','Profit Protection'],rules:['Move SL to break-even at 1R','Trail below each new higher low (longs)','Use ATR √ó 1.5 for dynamic trailing','Partial close 50% at 1R target','Trail remainder to maximize gains']},
  ]},
};

// ‚îÄ EA TEMPLATE ‚îÄ
const eaCode=(p,t,r)=>`<span class="cc">// ================================================================
// ForexElite Pro ‚Äî SMC Expert Advisor (MQL5)
// Pair: ${p} | TF: ${t} | Risk: ${r}% per trade
// ================================================================</span>

<span class="ck">#property</span> strict
<span class="ck">input</span> <span class="ct">double</span>  <span class="cv">RiskPct</span>     = <span class="cn">${r}</span>;     <span class="cc">// Risk % per trade</span>
<span class="ck">input</span> <span class="ct">double</span>  <span class="cv">MinRR</span>       = <span class="cn">2.0</span>;    <span class="cc">// Min R:R</span>
<span class="ck">input</span> <span class="ct">int</span>     <span class="cv">OB_Look</span>     = <span class="cn">20</span>;
<span class="ck">input</span> <span class="ct">int</span>     <span class="cv">CHoCH_Per</span>   = <span class="cn">14</span>;
<span class="ck">input</span> <span class="ct">double</span>  <span class="cv">OB_Buf</span>      = <span class="cn">5.0</span>;
<span class="ck">input</span> <span class="ct">int</span>     <span class="cv">Magic</span>       = <span class="cn">202501</span>;
<span class="ck">input</span> <span class="ct">int</span>     <span class="cv">MaxTrades</span>   = <span class="cn">3</span>;
<span class="ck">input</span> <span class="ct">bool</span>    <span class="cv">UseTrail</span>    = <span class="ck">true</span>;

<span class="ct">double</span> <span class="cv">g_OBH</span>, <span class="cv">g_OBL</span>;
<span class="ct">bool</span>   <span class="cv">g_Bull</span>, <span class="cv">g_Bear</span>;
<span class="ct">int</span>    <span class="cv">g_Trades</span> = <span class="cn">0</span>;

<span class="ct">int</span> <span class="cf">OnInit</span>() {
   <span class="cf">Print</span>(<span class="cs">"ForexElite EA Running ‚Äî "</span>, _Symbol);
   <span class="ck">return</span>(<span class="cv">INIT_SUCCEEDED</span>);
}

<span class="ct">void</span> <span class="cf">OnTick</span>() {
   <span class="ck">if</span>(!<span class="cf">IsNewBar</span>()) <span class="ck">return</span>;
   <span class="cf">ScanOB</span>();
   <span class="cf">DetectCHoCH</span>();
   <span class="cf">CheckEntry</span>();
   <span class="ck">if</span>(<span class="cv">UseTrail</span>) <span class="cf">ManageTrail</span>();
}

<span class="ct">void</span> <span class="cf">ScanOB</span>() {
   <span class="ck">for</span>(<span class="ct">int</span> i=<span class="cn">1</span>; i&lt;<span class="cv">OB_Look</span>; i++) {
      <span class="ct">bool</span> bull = <span class="cf">iClose</span>(_Symbol,<span class="cn">0</span>,i<span class="cn">-1</span>) &gt; <span class="cf">iOpen</span>(_Symbol,<span class="cn">0</span>,i<span class="cn">-1</span>)*<span class="cn">1.002</span>;
      <span class="ct">bool</span> bear = <span class="cf">iClose</span>(_Symbol,<span class="cn">0</span>,i) &lt; <span class="cf">iOpen</span>(_Symbol,<span class="cn">0</span>,i);
      <span class="ck">if</span>(bull && bear) {
         <span class="cv">g_OBH</span>=<span class="cf">iHigh</span>(_Symbol,<span class="cn">0</span>,i);
         <span class="cv">g_OBL</span>=<span class="cf">iLow</span>(_Symbol,<span class="cn">0</span>,i);
         <span class="ck">break</span>;
      }
   }
}

<span class="ct">void</span> <span class="cf">DetectCHoCH</span>() {
   <span class="ct">double</span> hh=<span class="cf">iHigh</span>(_Symbol,<span class="cn">0</span>,<span class="cf">iHighest</span>(_Symbol,<span class="cn">0</span>,<span class="cv">MODE_HIGH</span>,<span class="cv">CHoCH_Per</span>,<span class="cn">2</span>));
   <span class="ct">double</span> ll=<span class="cf">iLow</span> (_Symbol,<span class="cn">0</span>,<span class="cf">iLowest</span> (_Symbol,<span class="cn">0</span>,<span class="cv">MODE_LOW</span>, <span class="cv">CHoCH_Per</span>,<span class="cn">2</span>));
   <span class="cv">g_Bull</span>=<span class="cf">iClose</span>(_Symbol,<span class="cn">0</span>,<span class="cn">1</span>)&gt;hh;
   <span class="cv">g_Bear</span>=<span class="cf">iClose</span>(_Symbol,<span class="cn">0</span>,<span class="cn">1</span>)&lt;ll;
}

<span class="ct">void</span> <span class="cf">CheckEntry</span>() {
   <span class="ck">if</span>(<span class="cv">g_Trades</span>&gt;=<span class="cv">MaxTrades</span>) <span class="ck">return</span>;
   <span class="ct">double</span> a=<span class="cf">Ask</span>;
   <span class="ck">if</span>(<span class="cv">g_Bull</span>&&a&gt;=<span class="cv">g_OBL</span>&&a&lt;=<span class="cv">g_OBH</span>) {
      <span class="ct">double</span> sl=<span class="cv">g_OBL</span>-<span class="cv">OB_Buf</span>*_Point*<span class="cn">10</span>;
      <span class="cf">PlaceTrade</span>(<span class="cv">ORDER_TYPE_BUY</span>,<span class="cf">Lots</span>(a-sl),sl,a+(a-sl)*<span class="cv">MinRR</span>);
   }
   <span class="ck">if</span>(<span class="cv">g_Bear</span>&&a&gt;=<span class="cv">g_OBL</span>&&a&lt;=<span class="cv">g_OBH</span>) {
      <span class="ct">double</span> sl=<span class="cv">g_OBH</span>+<span class="cv">OB_Buf</span>*_Point*<span class="cn">10</span>;
      <span class="cf">PlaceTrade</span>(<span class="cv">ORDER_TYPE_SELL</span>,<span class="cf">Lots</span>(sl-a),sl,a-(sl-a)*<span class="cv">MinRR</span>);
   }
}

<span class="ct">double</span> <span class="cf">Lots</span>(<span class="ct">double</span> d) {
   <span class="ct">double</span> b=<span class="cf">AccountInfoDouble</span>(<span class="cv">ACCOUNT_BALANCE</span>);
   <span class="ct">double</span> pv=<span class="cf">SymbolInfoDouble</span>(_Symbol,<span class="cv">SYMBOL_TRADE_TICK_VALUE</span>);
   <span class="ck">return</span> <span class="cf">NormalizeDouble</span>(
      <span class="cf">MathMax</span>(<span class="cf">SymbolInfoDouble</span>(_Symbol,<span class="cv">SYMBOL_VOLUME_MIN</span>),
      <span class="cf">MathMin</span>(b*<span class="cv">RiskPct</span>/<span class="cn">100</span>/(d/_Point/<span class="cn">10</span>*pv),
              <span class="cf">SymbolInfoDouble</span>(_Symbol,<span class="cv">SYMBOL_VOLUME_MAX</span>))),<span class="cn">2</span>);
}

<span class="ct">void</span> <span class="cf">PlaceTrade</span>(<span class="ct">ENUM_ORDER_TYPE</span> t,<span class="ct">double</span> l,<span class="ct">double</span> sl,<span class="ct">double</span> tp) {
   <span class="cv">MqlTradeRequest</span> req={}; <span class="cv">MqlTradeResult</span> res={};
   req.action=<span class="cv">TRADE_ACTION_DEAL</span>; req.symbol=_Symbol; req.volume=l;
   req.type=t; req.price=(t==<span class="cv">ORDER_TYPE_BUY</span>)?<span class="cf">Ask</span>:<span class="cf">Bid</span>;
   req.sl=sl; req.tp=tp; req.magic=<span class="cv">Magic</span>; req.comment=<span class="cs">"FEP"</span>;
   <span class="ck">if</span>(!<span class="cf">OrderSend</span>(req,res)) <span class="cf">Print</span>(<span class="cs">"Error: "</span>,<span class="cf">GetLastError</span>());
   <span class="ck">else</span> <span class="cv">g_Trades</span>++;
}

<span class="ct">void</span> <span class="cf">ManageTrail</span>() {
   <span class="ck">for</span>(<span class="ct">int</span> i=<span class="cf">PositionsTotal</span>()-<span class="cn">1</span>;i&gt;=<span class="cn">0</span>;i--) {
      <span class="ck">if</span>(<span class="cf">PositionGetSymbol</span>(i)!=_Symbol) <span class="ck">continue</span>;
      <span class="ck">if</span>(<span class="cf">PositionGetInteger</span>(<span class="cv">POSITION_MAGIC</span>)!=<span class="cv">Magic</span>) <span class="ck">continue</span>;
      <span class="ct">bool</span> b=<span class="cf">PositionGetInteger</span>(<span class="cv">POSITION_TYPE</span>)==<span class="cv">POSITION_TYPE_BUY</span>;
      <span class="cv">MqlTradeRequest</span> req={}; <span class="cv">MqlTradeResult</span> res={};
      req.action=<span class="cv">TRADE_ACTION_SLTP</span>; req.position=<span class="cf">PositionGetTicket</span>(i);
      req.sl=b?<span class="cf">Bid</span>-<span class="cn">20</span>*_Point*<span class="cn">10</span>:<span class="cf">Ask</span>+<span class="cn">20</span>*_Point*<span class="cn">10</span>;
      req.tp=<span class="cf">PositionGetDouble</span>(<span class="cv">POSITION_TP</span>);
      <span class="cf">OrderSend</span>(req,res);
   }
}

<span class="ct">bool</span> <span class="cf">IsNewBar</span>() {
   <span class="ck">static</span> <span class="ct">datetime</span> t=<span class="cn">0</span>; <span class="ct">datetime</span> c=<span class="cf">iTime</span>(_Symbol,<span class="cn">0</span>,<span class="cn">0</span>);
   <span class="ck">if</span>(c!=t){t=c;<span class="ck">return</span>(<span class="ck">true</span>);} <span class="ck">return</span>(<span class="ck">false</span>);
}`;

// ‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê
const PAGE_TITLES={overview:'OVERVIEW',signals:'SIGNAL GENERATOR',risk:'RISK MANAGEMENT',library:'STRATEGY LIBRARY',ea:'EA GENERATOR',broker:'BROKER CONNECT',pairs:'CURRENCY PAIRS'};
const PAGE_SUBS={overview:'Dashboard',signals:'Rule-Based Engine',risk:'Capital Protection',library:'Knowledge Base',ea:'MT5 Expert Advisor',broker:'Broker Integration',pairs:'Market Watchlist'};

function nav(id,el){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.sb-item').forEach(i=>i.classList.remove('active'));
  document.getElementById('page-'+id).classList.add('active');
  if(el) el.classList.add('active');
  else {const it=document.querySelector(`[data-page="${id}"]`);if(it)it.classList.add('active');}
  document.getElementById('page-title').textContent=PAGE_TITLES[id]||id.toUpperCase();
  document.getElementById('page-sub').textContent=PAGE_SUBS[id]||'';
  closeSidebar();
  document.querySelector('.content').scrollTop=0;
}

// ‚ïê‚ïê‚ïê SIDEBAR ‚ïê‚ïê‚ïê
let sbCollapsed=false;
function toggleSidebar(){
  const sb=document.getElementById('sidebar');
  if(window.innerWidth>900){
    sbCollapsed=!sbCollapsed;
    sb.classList.toggle('collapsed',sbCollapsed);
    document.getElementById('collapse-icon').textContent=sbCollapsed?'‚ñ∂':'‚óÄ';
  } else {
    sb.classList.toggle('mobile-open');
    document.getElementById('sb-overlay').classList.toggle('open',sb.classList.contains('mobile-open'));
  }
}
function openSidebar(){
  const sb=document.getElementById('sidebar');
  sb.classList.add('mobile-open');
  document.getElementById('sb-overlay').classList.add('open');
}
function closeSidebar(){
  if(window.innerWidth<=900){
    document.getElementById('sidebar').classList.remove('mobile-open');
    document.getElementById('sb-overlay').classList.remove('open');
  }
}

// ‚ïê‚ïê‚ïê BUILD TICKER ‚ïê‚ïê‚ïê
function buildTicker(){
  const d=[...TICKER,...TICKER].map(t=>`<div class="t-item"><span class="t-pair">${t.p}</span><span class="t-price">${t.v}</span><span class="${t.u?'t-up':'t-dn'}">${t.c}</span></div>`).join('');
  document.getElementById('ticker-scroll').innerHTML=d;
}

// ‚ïê‚ïê‚ïê BUILD OVERVIEW ‚ïê‚ïê‚ïê
function buildOverview(){
  // Equity sparkline
  const svg=document.getElementById('equity-spark');
  const pts=[30,35,28,42,38,50,45,60,55,68,72,65,78,82,76,90,88,95,92,100,96,104,100,110,108,115,112,120,118,124];
  const max=Math.max(...pts),min=Math.min(...pts),w=800,h=80;
  const xs=pts.map((_,i)=>i/(pts.length-1)*w);
  const ys=pts.map(v=>h-(v-min)/(max-min)*(h-8)-4);
  const path='M '+xs.map((x,i)=>`${x},${ys[i]}`).join(' L ');
  const fill='M 0,'+h+' L '+xs.map((x,i)=>`${x},${ys[i]}`).join(' L ')+' L '+w+','+h+' Z';
  svg.innerHTML=`<defs><linearGradient id="sg" x1="0" y1="0" x2="0" y2="1"><stop offset="0%" stop-color="#C9A84C" stop-opacity=".3"/><stop offset="100%" stop-color="#C9A84C" stop-opacity="0"/></linearGradient></defs><path d="${fill}" fill="url(#sg)"/><path d="${path}" fill="none" stroke="#C9A84C" stroke-width="2"/>`;

  // Recent signals
  const SAMPLE_SIGS=[
    {pair:'XAUUSD',dir:'buy',strat:'SMC OB',rr:'1:2.5',time:'2m'},
    {pair:'EURUSD',dir:'sell',strat:'S&R Bounce',rr:'1:2.0',time:'18m'},
    {pair:'GBPUSD',dir:'buy',strat:'FVG Entry',rr:'1:3.0',time:'1h'},
    {pair:'USDJPY',dir:'buy',strat:'CHoCH',rr:'1:2.0',time:'2h'},
  ];
  document.getElementById('overview-signals').innerHTML=SAMPLE_SIGS.map(s=>`
    <div class="sig-row">
      <div class="sig-dir ${s.dir}">${s.dir==='buy'?'‚ñ≤':'‚ñº'}</div>
      <div class="sig-main"><div class="sig-pair">${s.pair}</div><div class="sig-strat">${s.strat}</div></div>
      <span class="sig-badge ${s.dir}">${s.dir.toUpperCase()}</span>
      <span class="sig-rr">${s.rr}</span>
      <span class="sig-time">${s.time} ago</span>
    </div>`).join('');

  // Sessions
  document.getElementById('sessions-pills').innerHTML=SESSIONS.map(s=>`
    <div class="sess-pill ${s.active?'active':''}">
      <div class="sess-dot"></div>
      <div class="sess-info">
        <div class="sess-name">${s.name}</div>
        <div class="sess-time">${s.open} ‚Äì ${s.close} UTC ¬∑ ${s.pairs}</div>
      </div>
    </div>`).join('');

  // Pair mini list
  document.getElementById('pair-mini-list').innerHTML=PAIRS.slice(0,8).map(p=>{
    const up=p.sig==='BUY';
    return `<div class="pm-row">
      <div class="pm-name">${p.p}</div>
      <div class="pm-bar-wrap"><div class="pm-bar" style="width:${p.vol}%"></div></div>
      <div class="pm-price">${p.bid}</div>
      <div class="pm-chg ${up?'up':'dn'}">${up?'+':'-'}${(Math.random()*.5).toFixed(2)}%</div>
    </div>`;}).join('');

  // Activity
  document.getElementById('activity-feed').innerHTML=ACTIVITY.map(a=>`
    <div class="act-item">
      <div class="act-dot" style="background:${a.color}"></div>
      <div class="act-content"><div class="act-msg">${a.msg}</div><div class="act-time">${a.t}</div></div>
    </div>`).join('');
}

// ‚ïê‚ïê‚ïê BUILD PAIRS TABLE ‚ïê‚ïê‚ïê
function buildPairs(){
  document.getElementById('pairs-tbody').innerHTML=PAIRS.map(p=>`
    <tr>
      <td style="font-weight:700">${p.p}</td>
      <td>${p.bid}</td><td>${p.ask}</td>
      <td style="color:var(--txt2)">${p.spread}</td>
      <td><div class="vol-bar"><div class="vol-fill" style="width:${p.vol}%"></div></div></td>
      <td style="color:var(--txt3);font-size:10px">${p.sess}</td>
      <td><span class="badge ${p.bias}">${p.bias.toUpperCase()}</span></td>
      <td><span class="badge ${p.sig==='BUY'?'bull':p.sig==='SELL'?'bear':'neut'}">${p.sig}</span></td>
    </tr>`).join('');
}

// ‚ïê‚ïê‚ïê BUILD BROKERS ‚ïê‚ïê‚ïê
function buildBrokers(){
  document.getElementById('broker-cards').innerHTML=BROKERS.map(b=>`
    <div class="bk-card" onclick="selectBroker('${b}')">
      <div class="bk-live-dot"></div>
      <div class="bk-name">${b}</div>
      <div class="bk-status off">DISCONNECTED</div>
    </div>`).join('');
}

// ‚ïê‚ïê‚ïê BUILD LIBRARY ‚ïê‚ïê‚ïê
function buildLibrary(){
  const keys=Object.keys(LIB);
  document.getElementById('lib-tabs').innerHTML=keys.map((k,i)=>`<button class="lib-tab-btn${i===0?' on':''}" onclick="libTab('${k}',this)">${k}</button>`).join('');
  document.getElementById('lib-panes').innerHTML=keys.map((k,i)=>`
    <div class="lib-pane${i===0?' on':''}" id="lib-${k}">
      <div class="strat-grid">${LIB[k].strats.map(s=>`
        <div class="strat-c" onclick="this.querySelector('.strat-expand').classList.toggle('on')">
          <span class="strat-badge ${LIB[k].badge}">${k}</span>
          <div class="strat-title">${s.title}</div>
          <div class="strat-desc">${s.desc}</div>
          <div class="strat-tags">${s.tags.map(t=>`<span class="strat-tag">${t}</span>`).join('')}</div>
          <div class="strat-expand">
            <ul class="strat-rules">${s.rules.map(r=>`<li>${r}</li>`).join('')}</ul>
          </div>
        </div>`).join('')}
      </div>
    </div>`).join('');
}
function libTab(k,el){
  document.querySelectorAll('.lib-tab-btn').forEach(b=>b.classList.remove('on'));
  document.querySelectorAll('.lib-pane').forEach(p=>p.classList.remove('on'));
  el.classList.add('on');
  document.getElementById('lib-'+k).classList.add('on');
}

// ‚ïê‚ïê‚ïê BUILD NOTIFICATIONS ‚ïê‚ïê‚ïê
function buildNotifs(){
  document.getElementById('notif-list').innerHTML=NOTIFS.map(n=>`
    <div class="notif-item">
      <div class="notif-dot2" style="background:${n.color}"></div>
      <div><div class="notif-body">${n.msg}</div><div class="notif-t">${n.t}</div></div>
    </div>`).join('');
}
function toggleNotif(){document.getElementById('notif-panel').classList.toggle('open');}
function clearNotifs(){document.getElementById('notif-list').innerHTML='<div style="padding:20px;text-align:center;font-size:11px;color:var(--txt3);font-family:\'JetBrains Mono\',monospace">ALL CLEAR</div>';}
document.addEventListener('click',e=>{const np=document.getElementById('notif-panel');if(!np.contains(e.target)&&!e.target.closest('.hbtn'))np.classList.remove('open');});

// ‚ïê‚ïê‚ïê SIGNAL GENERATOR ‚ïê‚ïê‚ïê
const PR={XAUUSD:{b:2318,p:0.1},EURUSD:{b:1.0841,p:0.0001},GBPUSD:{b:1.2653,p:0.0001},USDJPY:{b:154.32,p:0.01},GBPJPY:{b:195.24,p:0.01},AUDUSD:{b:0.6531,p:0.0001},USDCAD:{b:1.3681,p:0.0001},EURJPY:{b:167.34,p:0.01}};
const STRAT_NAMES=['SMC OB','FVG ENTRY','S&R BOUNCE','CHoCH TRADE','LIQ SWEEP','BRK RETEST'];

function generateSignals(){
  const out=document.getElementById('sig-output');
  const pair=document.getElementById('sig-pair').value.split(' ‚Äî ')[0];
  const tf=document.getElementById('sig-tf').value.split(' ‚Äî ')[0];
  out.innerHTML=`<div style="display:flex;align-items:center;gap:10px;padding:20px;font-family:'JetBrains Mono',monospace;font-size:11px;color:var(--gold)">‚è≥ SCANNING MARKET STRUCTURE...</div>`;
  document.getElementById('sig-count-label').textContent='SCANNING...';
  setTimeout(()=>{
    const sigs=mockSigs(pair,tf);
    document.getElementById('sig-count-label').textContent=`${sigs.length} SIGNAL${sigs.length!==1?'S':''} FOUND`;
    if(!sigs.length){out.innerHTML=`<div class="empty-state"><div class="empty-icon">üîç</div><div class="empty-text">NO SIGNALS</div><div class="empty-sub">Market is neutral on current parameters</div></div>`;return;}
    out.innerHTML=sigs.map(renderSig).join('');
    toast(`${sigs.length} signal(s) for ${pair} on ${tf}`);
  },1100);
}
function mockSigs(pair,tf){
  const pr=PR[pair]||{b:1,p:0.0001};
  const dp=pair==='XAUUSD'?2:pair.includes('JPY')?3:5;
  return Array.from({length:Math.floor(Math.random()*3)+1},()=>{
    const buy=Math.random()>.4,sl=Math.floor(Math.random()*30)+15,rr=[2,2.5,3][Math.floor(Math.random()*3)];
    const entry=pr.b+(Math.random()-.5)*pr.p*20;
    return {pair,tf,dir:buy?'buy':'sell',strat:STRAT_NAMES[Math.floor(Math.random()*STRAT_NAMES.length)],
      entry:entry.toFixed(dp),sl:(buy?entry-sl*pr.p:entry+sl*pr.p).toFixed(dp),
      tp:(buy?entry+sl*pr.p*rr:entry-sl*pr.p*rr).toFixed(dp),rr,slp:sl,str:Math.floor(Math.random()*2)+3};
  });
}
function renderSig(s){
  const dots=[1,2,3,4,5].map(d=>`<div class="str-dot${d<=s.str?' on':''}"></div>`).join('');
  return `<div class="sig-full-card ${s.dir}">
    <div class="sfc-icon ${s.dir}">${s.dir==='buy'?'‚ñ≤':'‚ñº'}</div>
    <div class="sfc-info">
      <div class="sfc-pair">${s.pair}</div>
      <div class="sfc-strat">${s.strat}</div>
      <div class="sfc-meta">${s.tf} ¬∑ SL: ${s.slp}p ¬∑ R:R 1:${s.rr}</div>
      <div class="sfc-str">${dots}</div>
    </div>
    <div class="sfc-levels">
      <div class="lvl-row"><span class="lvl-tag e">ENTRY</span><span>${s.entry}</span></div>
      <div class="lvl-row"><span class="lvl-tag s">SL</span><span>${s.sl}</span></div>
      <div class="lvl-row"><span class="lvl-tag t">TP</span><span>${s.tp}</span></div>
    </div>
  </div>`;
}

// ‚ïê‚ïê‚ïê CALCULATORS ‚ïê‚ïê‚ïê
function calcLot(){
  const b=+document.getElementById('acc-bal').value||10000;
  const r=+document.getElementById('risk-pct').value||1;
  const sl=+document.getElementById('sl-pips').value||30;
  document.getElementById('lot-res').textContent=((b*r/100)/(sl*10)).toFixed(2)+' LOT';
  toast('Lot size calculated');
}
function calcRR(){
  const e=+document.getElementById('rr-entry').value;
  const sl=+document.getElementById('rr-sl').value;
  const tp=+document.getElementById('rr-tp').value;
  if(!e||!sl||!tp)return;
  document.getElementById('rr-res').textContent='1 : '+((Math.abs(tp-e))/(Math.abs(e-sl))).toFixed(2);
  toast('R:R calculated');
}
function calcPip(){
  const l=+document.getElementById('pip-lot').value||0.1;
  const n=+document.getElementById('pip-n').value||50;
  const v=+document.getElementById('pip-type').value||10;
  document.getElementById('pip-res').textContent='$'+(l*n*v).toFixed(2);
  toast('Pip value calculated');
}

// ‚ïê‚ïê‚ïê EA GENERATOR ‚ïê‚ïê‚ïê
function renderEA(){
  const p=document.getElementById('ea-pair').value;
  const t=document.getElementById('ea-tf').value;
  const r=document.getElementById('ea-risk').value;
  document.getElementById('ea-fname').textContent=`ForexElite_SMC_${p}.mq5`;
  document.getElementById('ea-code').innerHTML=eaCode(p,t,r);
}
function copyEA(){
  navigator.clipboard.writeText(document.getElementById('ea-code').innerText)
    .then(()=>toast('EA code copied!'))
    .catch(()=>toast('Select and copy manually'));
}

// ‚ïê‚ïê‚ïê BROKER ‚ïê‚ïê‚ïê
function selectBroker(n){toast(`Selected: ${n}`);}
function connectBroker(){toast('Connecting to MT5...'); setTimeout(()=>toast('‚ö† Test on DEMO account first!'),1500);}

// ‚ïê‚ïê‚ïê TOAST ‚ïê‚ïê‚ïê
function toast(msg,color='var(--green)'){
  const c=document.getElementById('toasts');
  const t=document.createElement('div');
  t.className='toast'; t.style.borderLeftColor=color; t.textContent=msg;
  c.appendChild(t);
  setTimeout(()=>t.remove(),3100);
}

// ‚ïê‚ïê‚ïê LIVE PRICE FLICKER ‚ïê‚ïê‚ïê
setInterval(()=>{
  document.querySelectorAll('.t-price').forEach(el=>{
    const v=parseFloat(el.textContent);
    if(!isNaN(v)) el.textContent=(v+(Math.random()-.5)*0.001).toFixed(v>100?2:5);
  });
},3000);

// ‚ïê‚ïê‚ïê INIT ‚ïê‚ïê‚ïê
document.addEventListener('DOMContentLoaded',()=>{
  buildTicker();
  buildOverview();
  buildPairs();
  buildBrokers();
  buildLibrary();
  buildNotifs();
  renderEA();
});
</script>
</body>
</html>
